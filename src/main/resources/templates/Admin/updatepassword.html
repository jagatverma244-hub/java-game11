<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Update User Passwords</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Orbitron', sans-serif;
            background: #000;
            color: #fff;
        }

        .glow-border {
            border: 2px solid #00ffe5;
            box-shadow: 0 0 10px #00ffe5;
        }

        .glow-input {
            background: #111;
            border: 2px solid #00ffe5;
            color: #00ffe5;
        }

        .glow-input::placeholder {
            color: #999;
        }

        .btn-glow {
            background: #00ffe5;
            color: #000;
            font-weight: bold;
            transition: 0.3s;
        }

        .btn-glow:hover {
            background: #ff00ff;
            color: #fff;
        }

        .table-header {
            background: #111;
            color: #00ffe5;
            text-shadow: 1px 1px #ff00ff;
        }

        .table-row:hover {
            background-color: #1a1a1a;
        }

        .pagination-btn {
            border: 1px solid #00ffe5;
            color: #00ffe5;
            transition: 0.3s;
        }

        .pagination-btn:hover {
            background: #00ffe5;
            color: #000;
        }

        .pagination-active {
            background: #00ffe5;
            color: #000;
        }
    </style>
</head>
<body class="p-6">
<div class="max-w-7xl mx-auto p-6 rounded-xl glow-border">
    <h1 class="text-3xl font-bold mb-6 text-center text-[#00ffe5]">üîê Update User Passwords</h1>

    <form method="get" th:action="@{/admin/updatepassword}" class="mb-6 flex flex-col sm:flex-row gap-4">
        <input type="text" name="keyword" th:value="${keyword}" placeholder="Search by Email or Mobile"
               class="glow-input px-4 py-2 rounded w-full"/>
        <button type="submit" class="btn-glow px-6 py-2 rounded shadow">Search</button>
    </form>

    <div class="overflow-x-auto">
        <table class="w-full table-auto text-sm sm:text-base glow-border">
            <thead class="table-header">
            <tr>
                <th class="p-3">Username</th>
                <th class="p-3">Email</th>
                <th class="p-3">Mobile</th>
                <th class="p-3">wallet</th>

                <th class="p-3">Encoded Password</th>
                <th class="p-3">New Password</th>
                <th class="p-3">Action</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="u : ${user}" class="border-b border-gray-700 table-row">
                <form th:action="@{/admin/update-password}" method="post" class="contents">
                    <input type="hidden" name="id" th:value="${u.UId}" />
                    <td class="p-2" th:text="${u.UName}">abc</td>
                    <td class="p-2" th:text="${u.UEmail}">email@example.com</td>
                    <td class="p-2" th:text="${u.mobileNumber}">9999999999</td>
                    <td class="p-2" th:text="${u.walletBalance}">1000</td>
                    <td class="p-2 text-xs">
                        <input type="text" th:value="${u.UPassword}" readonly
                               class="w-full glow-input px-2 py-1 rounded text-xs" />
                    </td>
                    <td class="p-2">
                        <input type="text" name="newPassword" placeholder="New password"
                               class="glow-input px-2 py-1 rounded w-full" required/>
                    </td>
                    <td class="p-2">
                        <button type="submit" class="btn-glow px-4 py-1 rounded shadow">Update</button>
                    </td>
                </form>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="mt-6 flex justify-center gap-2 flex-wrap">
        <a th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
           th:href="@{/admin/updatepassword(page=${i}, keyword=${keyword})}"
           th:text="${i + 1}"
           th:classappend="${i == currentpage} ? 'pagination-active' : 'pagination-btn'"
           class="px-3 py-1 rounded font-semibold">
        </a>
    </div>
</div>
</body>
</html>
